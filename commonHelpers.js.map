{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const searchParams  =  {\n  key: \"11070675-9db3ad99120a3eae94c3d42ec\",\n  q: \"\",\n  image_type: \"photo\",\n  orientation: \"horizontal\",\n  safesearch: \"true\",\n  pretty: \"true\",\n  page: 1,\n  per_page: 15,\n}\n\nexport async function fetchPhoto(params) {\n  const spinner = document.querySelector('.loader')\n  spinner.classList.remove('is-hidden')\n  if (params.q === \"\") {\n        spinner.classList.add('is-hidden')\n        return\n  }\n\n  const { data } = await axios.get(`?${new URLSearchParams(params)}`)\n  spinner.classList.add('is-hidden')\n  return data\n}\n\n","export function rendrePhoto(photos, list) {\n    const markup = photos.hits\n    .map((photo) => {\n      return `<li class=\"gallery-item\">\n                            <a class=\"gallery-link\" href=${photo.largeImageURL}>\n                                <img\n                                class=\"gallery-image\"\n                                src=\"${photo.webformatURL}\"\n                                alt=\"${photo.tags}\"\n                                />\n                            </a>\n                            <div class=\"desrp\">\n                                <ul class=\"desrp-list\">\n                                    <li class=\"desrp-item\">\n                                        <p class=\"desrp-actions\">Likes</p>\n                                        <p class=\"desrp-actions-total\">${photo.likes}</p>\n                                    </li>\n                                    <li class=\"desrp-item\">\n                                        <p class=\"desrp-actions\">Views</p>\n                                        <p class=\"desrp-actions-total\">${photo.views}</p>\n                                    </li>\n                                    <li class=\"desrp-item\">\n                                        <p class=\"desrp-actions\">Comments</p>\n                                        <p class=\"desrp-actions-total\">${photo.comments}</p>\n                                    </li>\n                                    <li class=\"desrp-item\">\n                                        <p class=\"desrp-actions\">Downloads</p>\n                                        <p class=\"desrp-actions-total\">${photo.downloads}</p>\n                                    </li>\n                                </ul>\n                            </div>\n                        </li>` ;\n    })\n    .join(\"\");\n    list.insertAdjacentHTML(\"beforeend\", markup);\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport * as pixabay from \"./js/pixabay-api.js\"\nimport * as render from \"./js/render-functions.js\"\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: '250' });\n\nconst input = document.querySelector('input[name=\"search\"]')\nconst photosList = document.querySelector(\".gallery\");\nconst form = document.querySelector('.form')\nconst loadMoreBtn = document.querySelector(\".js-load-more-btn\");\n\n\ninput.addEventListener('input', inputValueFunc);\nform.addEventListener(\"submit\", formSubmit);\nloadMoreBtn.addEventListener('click', onBtnClick);\n\nlet lastPage;\n\nfunction inputValueFunc(event) {\n    pixabay.searchParams.q = event.target.value;\n}\n\nasync function formSubmit(event) {\n    event.preventDefault();\n\n    pixabay.searchParams.page = 1;\n\n    photosList.innerHTML = \"\";\n    if (input.value === \"\") {\n        hideLoadMoreBtn()\n        return\n    }\n\n    if (pixabay.searchParams.page === 1) {\n        hideLoadMoreBtn()\n    }\n\n    try {\n        const photos = await pixabay.fetchPhoto(pixabay.searchParams)\n            if (photos.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                });\n            }\n            else {\n                hideLoadMoreBtn()\n                render.rendrePhoto(photos, photosList)\n                lastPage = Math.ceil(photos.totalHits / pixabay.searchParams.per_page)\n                lightbox.refresh()\n                input.value = ''\n                if (lastPage !== pixabay.searchParams.page) {\n                    showLoadMoreBtn()\n                }\n            }\n    } catch (error) {\n                iziToast.error({\n                    message: \"Error\",\n                    position: 'topRight',\n                });\n    }\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('is-hidden')\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('is-hidden')\n}\n\nasync function onBtnClick() {\n    pixabay.searchParams.page += 1;\n\n    if (lastPage === pixabay.searchParams.page) {\n        hideLoadMoreBtn()\n        iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'bottomRight',\n                });\n    }\n    \n    const photos = await pixabay.fetchPhoto(pixabay.searchParams)\n    render.rendrePhoto(photos, photosList)\n    lightbox.refresh()\n    scroll();\n}\n\nfunction smoothScroll(height) {\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth'\n  });\n}\n\nfunction scroll() {\n  const cardHeight = photosList.getBoundingClientRect().height;\n  smoothScroll(cardHeight * 2);\n}"],"names":["axios","searchParams","fetchPhoto","params","spinner","data","rendrePhoto","photos","list","markup","photo","lightbox","SimpleLightbox","input","photosList","form","loadMoreBtn","inputValueFunc","formSubmit","onBtnClick","lastPage","event","pixabay.searchParams","hideLoadMoreBtn","pixabay.fetchPhoto","iziToast","render.rendrePhoto","showLoadMoreBtn","scroll","smoothScroll","height","cardHeight"],"mappings":"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"}